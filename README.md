# 金铲铲之战自动拿牌工具项目说明文档

## 一、项目简介
本项目基于计算机视觉与深度学习技术，开发适用于《金铲铲之战》游戏的自动拿牌辅助工具。通过 **图像识别（ResNet-18 特征匹配）** 与 **PyQt5 图形界面** 结合，实现自动识别选秀阶段英雄、按预设阵容/自定义英雄列表智能拿牌，降低手动操作负担，提升游戏体验。

## 二、核心功能
### 双模式拿牌
- **已有阵容模式**：加载预设英雄阵容文件（存于`阵容`目录），自动识别并拿取目标英雄。
- **指定英雄模式**：通过图形界面勾选目标英雄，精准拿取自定义列表内英雄。

### 可视化交互
- 支持手动框选递牌区域（适配不同分辨率/窗口布局），实时显示区域坐标；
- 提供检测结果与拿牌日志反馈，清晰呈现每轮识别及操作状态。

### 智能图像识别
- 基于ResNet-18提取英雄图像特征，结合余弦相似度匹配，应对皮肤、光影干扰；
- 支持数据增强（旋转、遮挡模拟）训练，提升复杂场景下识别鲁棒性。

## 三、环境依赖
### （一）基础环境
- **Python版本**：建议3.8+
- **系统支持**：Windows（依赖dxcam截图，需显卡驱动支持；其他系统需替换截图逻辑）

### （二）依赖库
通过`requirements.txt`统一管理，安装命令：
```bash
pip install -r requirements.txt
# 快速启动指南

## 一、初始化准备

### 1. 配置英雄数据
- 确保`heroes.json`文件中的英雄名称与图片路径映射正确
- `pictures/`目录下需要存在对应的英雄图像文件

### 2. 设置递牌区域
1. 运行`用户框选递牌区域.py`脚本
2. 按照提示使用鼠标在游戏界面中框选"选秀递牌区"
3. 按**空格键**确认选择
4. 框选的区域坐标将自动保存到`config.py`配置文件中

## 二、启动流程

### 1. 加载模型与特征库
- 运行`交互界面.py`主程序
- 点击界面中的**加载模型**按钮
- 程序将自动完成以下操作：
  - 初始化ResNet-18特征提取器
  - 构建英雄图像特征库

### 2. 选择拿牌模式

#### 已有阵容模式
- 在界面左侧的"已有阵容"列表中
- 选择预先准备好的阵容文件（存放在`阵容/`目录下）

#### 指定英雄模式
1. 切换到"指定英雄"标签页
2. 按照英雄费用分类浏览可选英雄
3. 勾选需要自动拿取的目标英雄

### 3. 开始自动拿牌
- 点击界面中的**自动拿牌**按钮
- 或直接按键盘**N键**快捷启动

程序将执行以下操作：
1. 截取游戏画面中的递牌区域
2. 将截图分割为单个英雄图像
3. 调用`FeatureMatcher`进行英雄识别匹配
4. 输出识别结果到日志界面
5. 自动点击选取目标英雄
6. 实时显示操作日志在程序界面中
